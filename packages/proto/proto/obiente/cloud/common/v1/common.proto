syntax = "proto3";

package obiente.cloud.common.v1;

option go_package = "github.com/obiente/cloud/apps/shared/proto/obiente/cloud/common/v1;commonv1";

import "google/protobuf/timestamp.proto";

// LogLevel represents the severity/type of a log line
enum LogLevel {
  LOG_LEVEL_UNSPECIFIED = 0;
  LOG_LEVEL_TRACE = 1;    // Trace-level debugging
  LOG_LEVEL_DEBUG = 2;    // Debug information
  LOG_LEVEL_INFO = 3;     // Informational messages (default)
  LOG_LEVEL_WARN = 4;     // Warning messages
  LOG_LEVEL_ERROR = 5;    // Error messages
}

// Pagination represents pagination information for list responses
message Pagination {
  int32 page = 1;         // Current page number (1-indexed)
  int32 per_page = 2;     // Number of items per page
  int32 total = 3;        // Total number of items
  int32 total_pages = 4;  // Total number of pages
}

// VPSSize represents a VPS instance size configuration
// This is a shared type used across multiple services
message VPSSize {
  string id = 1;                    // Size ID (e.g., "small", "medium", "cx11")
  string name = 2;                  // Human-readable name
  optional string description = 3;  // Optional description
  int32 cpu_cores = 4;              // Number of CPU cores
  int64 memory_bytes = 5;           // Memory in bytes
  int64 disk_bytes = 6;             // Disk space in bytes
  int64 bandwidth_bytes_month = 7;  // Monthly bandwidth limit (0 = unlimited)
  int64 minimum_payment_cents = 8;  // Minimum payment in cents required to create this VPS size (0 = no requirement)
  bool available = 9;               // Whether this size is available
  string region = 10;               // Region (empty = all regions)
  optional google.protobuf.Timestamp created_at = 11;
  optional google.protobuf.Timestamp updated_at = 12;
}

// ExtractServerFileRequest is a shared request message for extracting zip files
// Resource-specific services should embed or reference this in their own request types
message ExtractServerFileRequest {
  string zip_path = 1; // Path to the zip file to extract
  string destination_path = 2; // Directory path where files should be extracted
  optional string volume_name = 3; // If specified, extract to this volume instead of container filesystem
}

// ExtractServerFileResponse is a shared response message for extracting zip files
message ExtractServerFileResponse {
  bool success = 1;
  optional string error = 2;
  int32 files_extracted = 3; // Number of files successfully extracted
}

// CreateServerFileArchiveRequest is a shared request message for creating zip archives
// Resource-specific services should embed or reference this in their own request types
message CreateServerFileArchiveRequest {
  repeated string source_paths = 1; // Paths to files/folders to zip
  string destination_path = 2; // Path where the zip file should be created
  bool include_parent_folder = 3; // If true, zip includes the parent folder; if false, zip contains files directly
}

// CreateServerFileArchiveResponse is a shared response message for creating zip archives
message CreateServerFileArchiveResponse {
  bool success = 1;
  optional string error = 2;
  string archive_path = 3; // Path to the created zip file
  int32 files_archived = 4; // Number of files archived
}

