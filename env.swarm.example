# Obiente Cloud - High Availability Docker Swarm Configuration
# Copy this file to .env and customize with your values

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL superuser credentials
POSTGRES_USER=obiente
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
POSTGRES_DB=obiente

# PostgreSQL replication
REPLICATION_PASSWORD=CHANGE_ME_REPLICATION_PASSWORD_HERE
PATRONI_ADMIN_PASSWORD=CHANGE_ME_PATRONI_PASSWORD_HERE

# PgPool admin
PGPOOL_ADMIN_PASSWORD=CHANGE_ME_PGPOOL_PASSWORD_HERE

# ============================================================================
# API CONFIGURATION
# ============================================================================

# API port
GO_API_PORT=3001

# Logging level: debug, info, warn, error
LOG_LEVEL=debug

# ============================================================================
# DEPLOYMENT ORCHESTRATION
# ============================================================================

# Deployment strategy: least-loaded, round-robin, resource-based
DEPLOYMENT_STRATEGY=least-loaded

# Maximum deployments per node
MAX_DEPLOYMENTS_PER_NODE=50

# ============================================================================
# DOMAIN & SSL
# ============================================================================

# Primary domain
DOMAIN=obiente.example.com

# Let's Encrypt email for SSL certificates
ACME_EMAIL=admin@example.com

# ============================================================================
# AUTHENTICATION (Zitadel)
# ============================================================================

# Zitadel instance URL (where your Zitadel auth is hosted)
# API will validate tokens against: {ZITADEL_URL}/oidc/v1/userinfo
ZITADEL_URL=https://auth.obiente.cloud

# Development options (NEVER use in production!)
# DISABLE_AUTH=true      # Completely disables authentication
# SKIP_TLS_VERIFY=true   # Skips TLS certificate verification

# ============================================================================
# SECURITY
# ============================================================================

# Generate with: openssl rand -hex 32
JWT_SECRET=GENERATE_64_CHAR_RANDOM_STRING_HERE
SESSION_SECRET=GENERATE_64_CHAR_RANDOM_STRING_HERE

# ============================================================================
# CORS CONFIGURATION
# ============================================================================

# Comma-separated list of allowed origins
# Use "*" for all origins (development only) or specify exact origins
CORS_ORIGIN=https://obiente.example.com,https://dashboard.example.com,http://localhost:3000

# ============================================================================
# RATE LIMITING
# ============================================================================

RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=100

# ============================================================================
# MONITORING
# ============================================================================

# Grafana admin password
GRAFANA_PASSWORD=CHANGE_ME_GRAFANA_PASSWORD_HERE

# ============================================================================
# SWARM CONFIGURATION
# ============================================================================

# Node ID (automatically detected, but can be overridden)
# NODE_ID=

# Swarm manager URL (for API to API communication)
# SWARM_MANAGER_URL=https://manager-1.example.com
